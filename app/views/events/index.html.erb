<div class="navbar-custom">
  <a href="/contact" class="navbar-link">Contact us</a>
  <a href="https://www.facebook.com" target="_blank" class="navbar-link">
  <img src="/assets/facebook-logo.png" alt="Facebook Logo" class="facebook-logo">
    Join us on Facebook
  </a>
</div>

<div class="container mt-4">
  <div class="year-menu">
    <ul>
      <li class="year-item" onmouseover="showMonths('2023')" onmouseout="hideMonths('2023')">
        2023
        <ul class="month-menu" id="months-2023" style="display: none;">
          <li><a href="/events?year=2023&month=1">January</a></li>
          <li><a href="/events?year=2023&month=2">February</a></li>
          <li><a href="/events?year=2023&month=3">March</a></li>
          <li><a href="/events?year=2023&month=4">April</a></li>
          <li><a href="/events?year=2023&month=5">May</a></li>
          <li><a href="/events?year=2023&month=6">June</a></li>
          <li><a href="/events?year=2023&month=7">July</a></li>
          <li><a href="/events?year=2023&month=8">August</a></li>
          <li><a href="/events?year=2023&month=9">September</a></li>
          <li><a href="/events?year=2023&month=10">October</a></li>
          <li><a href="/events?year=2023&month=11">November</a></li>
          <li><a href="/events?year=2023&month=12">December</a></li>
        </ul>
      </li>
      <li class="year-item" onmouseover="showMonths('2024')" onmouseout="hideMonths('2024')">
        2024
        <ul class="month-menu" id="months-2024" style="display: none;">
          <li><a href="/events?year=2024&month=1">January</a></li>
          <li><a href="/events?year=2024&month=2">February</a></li>
          <li><a href="/events?year=2024&month=3">March</a></li>
          <li><a href="/events?year=2024&month=4">April</a></li>
          <li><a href="/events?year=2024&month=5">May</a></li>
          <li><a href="/events?year=2024&month=6">June</a></li>
          <li><a href="/events?year=2024&month=7">July</a></li>
          <li><a href="/events?year=2024&month=8">August</a></li>
          <li><a href="/events?year=2024&month=9">September</a></li>
          <li><a href="/events?year=2024&month=10">October</a></li>
          <li><a href="/events?year=2024&month=11">November</a></li>
          <li><a href="/events?year=2024&month=12">December</a></li>
        </ul>
      </li>
      <li class="year-item" onmouseover="showMonths('2025')" onmouseout="hideMonths('2025')">
        2025
        <ul class="month-menu" id="months-2025" style="display: none;">
          <li><a href="/events?year=2025&month=1">January</a></li>
          <li><a href="/events?year=2025&month=2">February</a></li>
          <li><a href="/events?year=2025&month=3">March</a></li>
          <li><a href="/events?year=2025&month=4">April</a></li>
          <li><a href="/events?year=2025&month=5">May</a></li>
          <li><a href="/events?year=2025&month=6">June</a></li>
          <li><a href="/events?year=2025&month=7">July</a></li>
          <li><a href="/events?year=2025&month=8">August</a></li>
          <li><a href="/events?year=2025&month=9">September</a></li>
          <li><a href="/events?year=2025&month=10">October</a></li>
          <li><a href="/events?year=2025&month=11">November</a></li>
          <li><a href="/events?year=2025&month=12">December</a></li>
        </ul>
      </li>
      <li class="year-item" onmouseover="showMonths('2026')" onmouseout="hideMonths('2026')">
        2026
        <ul class="month-menu" id="months-2026" style="display: none;">
          <li><a href="/events?year=2026&month=1">January</a></li>
          <li><a href="/events?year=2026&month=2">February</a></li>
          <li><a href="/events?year=2026&month=3">March</a></li>
          <li><a href="/events?year=2026&month=4">April</a></li>
          <li><a href="/events?year=2026&month=5">May</a></li>
          <li><a href="/events?year=2026&month=6">June</a></li>
          <li><a href="/events?year=2026&month=7">July</a></li>
          <li><a href="/events?year=2026&month=8">August</a></li>
          <li><a href="/events?year=2026&month=9">September</a></li>
          <li><a href="/events?year=2026&month=10">October</a></li>
          <li><a href="/events?year=2026&month=11">November</a></li>
          <li><a href="/events?year=2026&month=12">December</a></li>
        </ul>
      </li>
    </ul>
  </div>

  <!-- Display events based on selected year and month -->
  <div class="events">
  <% @events.each do |event| %>
    <div class="event">
      <h2><%= event.title %></h2>
      <p><%= event.description %></p>
      <!-- Display photos if available -->
      <% if event.photos.any? %>
        <div class="photos">
          <% event.photos.each do |photo| %>
            <img src="<%= asset_path(photo.image) %>" alt="Event Photo">
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>

<script>
  function showMonths(year) {
    document.getElementById('months-' + year).style.display = 'block';
  }

  function hideMonths(year) {
    document.getElementById('months-' + year).style.display = 'none';
  }
</script>

<style>
  .navbar-custom {
    text-align: right;
    padding: 10px;
    position: absolute;
    top: 10px;
    right: 10px;
  }

  .navbar-link {
    margin-left: 15px;
    text-decoration: none;
    color: #ffffff;
    font-weight: bold;
    background-color: #007bff;
    padding: 10px 20px;
    border-radius: 5px;
  }

  .navbar-link:hover {
    background-color: #0056b3;
  }

  .facebook-logo {
    width: 20px;
    height: 20px;
    vertical-align: middle;
    margin-right: 5px;
  }

  .year-menu ul {
    list-style-type: none;
    padding: 0;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
  }

  .year-item {
    position: relative;
    margin: 10px;
    padding: 10px 20px;
    background-color: #007bff;
    color: white;
    border-radius: 5px;
    cursor: pointer;
  }

  .year-item:hover {
    background-color: #0056b3;
  }

  .month-menu {
    display: none;
    position: absolute;
    background-color: white;
    border: 1px solid #ccc;
    border-radius: 5px;
    z-index: 1000;
    top: 40px;
    left: 0;
  }

  .month-menu li {
    padding: 5px 10px;
  }

  .month-menu a {
    text-decoration: none;
    color: #007bff;
    display: block;
  }

  .month-menu a:hover {
    background-color: #f0f0f0;
  }
</style>

  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="text-center">Event</h1>
    <% if user_signed_in? %>
    <% end %>
  </div>

  <div class="row row-cols-1 row-cols-md-4 g-4">
    <% @events.each do |event| %>
      <div class="col">
        <div class="card h-100 text-center border-light shadow">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title"><%= event.title %></h5>
            <p class="card-text"><strong>Start date :</strong> <%= event.start_date %></p>
            <p class="card-text"><strong>Duration :</strong> <%= event.duration %> minutes</p>
            <p class="card-text"><strong>Price :</strong> <%= event.price %> â‚¬</p>
            <p class="card-text"><strong>Place :</strong> <%= event.location %></p>
            <p class="card-text"><strong>Created by :</strong> <%= event.user.email %></p>
            <p class="card-text"><strong>Number of registrants :</strong> <%= event.attendees.count %></p>
            <div class="mt-auto">
              <%= link_to 'Show more', event_path(event), class: "btn btn-primary" %>
              <% if current_user&.admin? %>
                <%= link_to 'Delete', event_path(event), method: :delete, data: { confirm: 'Are you sure ?' }, class: 'btn btn-primary' %>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
